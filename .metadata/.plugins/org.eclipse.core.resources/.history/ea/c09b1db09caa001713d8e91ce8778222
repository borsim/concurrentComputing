/*
 * fourAnts.xc
 *
 *  Created on: 4 Oct 2017
 *      Author: Rudy, Miki
 */

#include <platform.h>
#include <stdio.h>

struct ant {
    char x;
    char y;
    char food;
};
typedef struct ant ant;

const char field[3][4] = {{10,0,1,7},{2,10,0,3},{6,8,7,6}};

void queenServer (chanend a1, chanend a0) {
    int serving = 10;
    char a1food;
    char a0food;
    while (serving > 0) {
      a1 :> a1food;
      a0 :> a0food;
      if (a0food > a1food) {
          // 1 to keep moving, 0 to harvest
          a1 <: 1;
          a0 <: 0;
      } else {
          a1 <: 0;
          a0 <: 1;
      }
      serving--;
    }

}
void antClient (char[3][4] field, char startX, char startY, chanend c) {
    char x = startX;
    char y = startY;
    char food = 0;
    char instruction = 0;

    //report
    c <: field[x][y];
    //receive instruction
    c :> instruction;
    //perform approporiate action
    if (instruction == 0) {
        food += field[x][y];
    } else {
        for (int i = 0; i < 2; i ++){
            char east  = field[(x+1) % 3][(y) % 4];
            char south = field[(x) % 3][(y+1) % 4];
            if (east > south) {
               x = (x + 1) % 3;
            } else {
               y = (y + 1) % 4;
            }
        }
    }

}



int main() {
    ant ant0;
    ant ant1;
    ant queen;
    chan a1;
    chan a0;

    return 0;
}





